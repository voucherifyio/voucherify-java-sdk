apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'eclipse'

sourceCompatibility = 1.7
targetCompatibility = 1.7

version = '4.3.0'

repositories {
    mavenCentral()
    jcenter()
}

dependencies {
    compile 'com.squareup.retrofit:retrofit:1.9.0'
    compile 'com.squareup.retrofit:converter-jackson:1.9.0'

    compile 'com.squareup.okhttp:okhttp-urlconnection:2.0.0'
    compile 'com.squareup.okhttp:okhttp:2.0.0'

    compile 'io.reactivex:rxjava:1.0.0'
    compile 'org.projectlombok:lombok:1.16.8'

    testCompile group: 'junit', name: 'junit', version: '4.12'
    testCompile group: 'org.assertj', name: 'assertj-core', version: '3.6.2'
    testCompile group: 'org.mockito', name: 'mockito-core', version: '2.7.11'
    testCompile group: 'com.squareup.okhttp', name: 'mockwebserver', version: '2.0.0'
    testCompile 'org.awaitility:awaitility-scala:2.0.0'

    task fatJar(type: Jar) {
        baseName = project.name + '-all'
        from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
        with jar
    }
}


apply plugin: 'maven-publish'

publishing {
    publications {
        maven(MavenPublication) {
            groupId 'pl.rspective.voucherify.client'
            artifactId 'voucherify-java-sdk'

            from components.java
        }
    }
}

test {
    testLogging {
        events "passed", "skipped", "failed", "standardOut", "standardError"
    }}